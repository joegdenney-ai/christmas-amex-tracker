from datetime import datetime, date
DB_PATH = "purchases.db"
EXPIRY_DATE = date(2025, 12, 28)
    joe_owes = joe_independent + joint_total / 2
    kath_owes = kath_independent + joint_total / 2

    # Show a live countdown / warning until the cloud database expiry date
    today = date.today()
    days_left = (EXPIRY_DATE - today).days
    if days_left > 0:
        expiry_warning = (
            f"Cloud database expires in {days_left} day"
            f"{'s' if days_left != 1 else ''} on 28 December 2025. "
            "After that, you may lose access unless you upgrade or export your data."
        )
    elif days_left == 0:
        expiry_warning = (
            "Cloud database expires today (28 December 2025). "
            "After today, you may lose access unless you upgrade or export your data."
        )
    else:
        expiry_warning = (
            "Cloud database expiry date (28 December 2025) has passed. "
            "If the database becomes paused, you may need to upgrade or export your data."
        )
  return render_template(
        "index.html",
        purchases=purchases,
        joe_independent=joe_independent,
        kath_independent=kath_independent,
        joint_total=joint_total,
        joe_owes=joe_owes,
        kath_owes=kath_owes,
        expiry_warning=expiry_warning,
    )